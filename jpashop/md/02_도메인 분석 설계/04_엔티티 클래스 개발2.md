### 엔티티 클래스 개발2

*JPA 에서 외래키*
- JPA 는 자동으로 외래키를 걸어주지만, 항상 이 외래키를 걸어줘야 되는가에 대한 의문에 대해서는 서비스의 종류에 따라 다르게 판단해야 한다.
- 단순하게 서비스가 잘 되기만 하면 된다면 외래키를 걸지 않고 인덱스만 잘 걸어주면 된다.  
- 하지만, 돈과 관련이 되어있는 등의 데이터의 정합성이 중요한 경우에는 외래키를 걸어주는 것에 대해 고려해 봐야한다.

*@ManyToMany 는 사용하지 말자*
- @ManyToMany 는 편리한 것 같지만, 중간 테이블에 컬럼을 추가할 수 없고, 세밀하게 쿼리를 실행하기 어렵기 때문에 실무에서 사용하기에는 한계가 있다.
- 중간 엔티티를 만들고 @ManyToOne, @OneToMany 로 매핑해서 사용하자.

*값 타입은 변경 불가능하게 설계해야 한다*
- @Setter 를 제거하고, 생성자에서 값을 모두 초기화해서 변경 불가능한 클래스를 만들자.
- JPA 스펙상 엔티티나 임베디드 타입은 자바 기본 생성자를 public 또는 protected 로 설정해야 한다.
- public 으로 두는 것보다는 protected 로 설정하는 것이 그나마 더 안전하다.
- JPA 가 이런 제약을 두는 이유는 JPA 구현 라이브러리가 객체를 생성할 때 리플랙션 같은 기술을 사용할 수 있도록 지원해야 하기 때문이다.