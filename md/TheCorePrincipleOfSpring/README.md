# 스프링의 핵심원리

- [스프링의 핵심](##스프링의-핵심)
- [제어의 역전 (Inversion of Control, IoC)](##제어의-역전-(Inversion-of-Control))
- [의존성 주입 (Depencency Injection, DI)](##의존성-주입-(Depencency-Injection,-DI))

## 스프링의 핵심

> 기술과 비즈니스 로직의 복잡함을 해결하는 데 스프링이 공통적으로 사용하는 도구가 있다. 바로 객체지향과 DI 이다.
> 스프링 개발자는 자바 엔터프라이즈 기술의 가장 큰 장점은 바로 객체지향 설계와 프로그래밍을 가능하게 해주는 자바 언어라고 생각했다.
> 그런데 EJB 등이 등장해서 자바 언어의 객체지향 프로그래밍의 장점을 취하지 못하게 하면서, 특정 기술의 스펙에 종속된 설계 방식을 강요했다는 점에 불만을 가졌다.
>
> &nbsp;&nbsp;&nbsp;
> 스프링의 모토는 결국 "기본으로 돌아가자" 이다. 자바의 기본인 객체지향에 충실한 설계가 가능하도록 단순한 오브젝트로 개발할 수 있고,
> 객체 지향의 설계 기법을 잘 적용할 수 있는 구조를 만들기 위해 DI 같은 유용한 기술을 편하게 적용하도록 도와주는 것이 스프링의 기본 전략이다.
>
> &nbsp;&nbsp;&nbsp;
> 지금까지 살펴봤듯이 기술적인 복잡함을 효과적으로 다루게 해주는 기법은 모두 DI를 바탕으로 하고 있다.
> 서비스 추상화, 템플릿/콜백, AOP 와 같은 스프링의 기술은 DI 없이는 존재할 수 없는 것들이다.
>
> &nbsp;&nbsp;&nbsp;
> 그리고 DI는 객체지향 설계 기술이 없이는 그 존재의미가 없다.
> 1장에서 살펴봤듯이 DI란 특별한 기술이라기보다는 유연하게 확장할 수 있는 오브젝트 설계를 하다 보면 자연스럽게 적용하게 되는 객체지향 프로그래밍 기법일 뿐이다.
> 스프링은 단지 그것을 더욱 편하고 쉽게 사용하도록 도와줄 뿐이다.
>
> *- 토비의 스프링, 8장 스프링이란 무엇인가?, 8.2 스프링의 목적*

&nbsp;&nbsp;&nbsp; 스프링은 자바 언어 기반의 프레임워크이다. 자바 언어의 가장 큰 특징은 객체 지향 언어라는 점이며, 스프링은 객체 지향 언어가 가진 특징을 살려내는 프레임워크이다. 즉 스프링은 **
좋은 객체 지향** 애플리케이션을 개발할 수 있게 도와주는 프레임워크이다.

&nbsp;&nbsp;&nbsp; 좋은 객체 지향 설계를 하기 위해서 OCI 와 DIP 를 지키려면 다형성만으로는 해결할 수 없다. IoC(제어의 역전), DI(의존성 주입) 등의 개념이 필요한데 스프링이 DI와
DI 컨테이너 제공으로 문제를 해결해준다. 그로인해 클라이언트 코드의 변경 없이 기능 확장한 좋은 객체 지향 설계를 가능하도록 한다.

&nbsp;&nbsp;&nbsp; 옛날 어떤 개발자가 좋은 객체 지향 개발을 하려고 OCP와 DIP 원칙을 지키면서 개발을 하려다보니 IoC(제어의 역전), DI(의존성 주입) 같은 개념이 필요했고 그래서
프레임워크로 만들어 버리게 되었다. 즉 순수하게 자바로 해당 원칙들을 지키면서 개발해보면 결국 스프링 프레임워크를 만들게 된다는 것이다. 더 정확하게는 DI 컨테이너를 만들게 된다.

## 제어의 역전 (Inversion of Control, IoC)

기존 프로그램은 클라이언트 구현 객체가 스스로 필요한 서버 구현 객체르라 생성하고, 연결하고, 실행했다. 한마디로 구현 객체가 프로그램의 제어 흐름을 스스로 조종했다. 개발자 입장에서는 자연스러운 흐름이다. 반대로
프로그램의 제어 흐름을 직접 제어하는 것이 아니라 외부에서 관리하는 것을 제어의 역전(IoC)이라 한다.

> *제어의 역전이라는 건, 간단히 프로그램의 제어 흐름 구조가 뒤바뀌는 것이라고 설명할 수 있다.*
> *일반적으로 프로그램의 흐름은 main() 메소드와 같이 프로그램이 시작되는 지점에서 다음에 사용할 오브젝트를 결정하고, 결정한 오브젝트를 생성하고, 만들어진 오브젝트에 있는 메소드를 호출하고, 그 오브젝트 메소드 안에서 다음에 사용할 것을 결정하고 호출하는 식의 작업이 반복된다.*
> *이런 프로그램 구조에서 각 오브젝트는 프로그램 흐름을 결정하거나 사용할 오브젝트를 구성하는 작업에 능동적으로 참여한다.*
>
> *...(중략)*
>
> *&nbsp;&nbsp;&nbsp;제어의 역전이란 이런 제어 흐름의 개념을 거꾸로 뒤집는 것이다.*
> *제어의 역전에서는 오브젝트가 자신이 사용할 오브젝트를 스스로 선택하지 않는다.*
> *당연히 생성하지도 않는다. 또 자신도 어떻게 만들어지고 어디서 사용되는지를 알 수 없다.*
> *모든 제어 권한을 자신이 아닌 다른 대상에게 위임하기 때문이다.*
> *프로그램 시작을 담당하는 main()과 같은 엔트리 포인트를 제외하면 모든 오브젝트는 이렇게 위임받은 제어 권한을 갖는 특별한 오브젝트에 의해 결정되고 만들어진다.*
>
> *...(중략)*
>
> *&nbsp;&nbsp;&nbsp;프레임워크도 제어의 역전 개념이 적용된 대표적인 기술이다. 프레임워크는 라이브러리의 다른 이름이 아니다.*
> *프레임워크는 단지 미리 만들어둔 반제품이나, 확장해서 사용할 수 있도록 준비된 추상 라이브러리의 집합이 아니다.*
> *프레임워크가 어떤 것인지 이해하려면 라이브러리와 프레임워크가 어떻게 다른지 알아야 한다.*
> *라이브러리를 사용하는 애플리케이션 코드는 애플리케이션 흐름을 직접 제어한다.*
> *단지 동작하는 중에 필요한 기능이 있을 때 능동적으로 라이브러리를 사용할 뿐이다.*
> *반면에 프레임워크는 거꾸로 애플리케이션 코드가 프레임워크에 의해 사용된다.*
> *보통 프레임워크 위에 개발한 클래를 등록해두고, 프레임워크가 흐름을 주도하는 중에 개발자가 만든 애플리케이션 코드를 사용하도록 만드는 방식이다.*
> *최근에는 툴킷, 엔진, 라이브러리 등도 유행을 따라서 무작정 프레임워크라고 부르기도 하는데 이는 잘못된 것이다.*
> *프레임워크에는 분명한 제어의 역전 개념이 적용되어 있어야 한다.*
> *애플리케이션 코드는 프레임워크가 짜놓은 틀에서 수동적으로 동작해야 한다.*
>
> *...(중략)*
>
> *&nbsp;&nbsp;&nbsp;제어의 역전에서는 프레임워크 또는 컨테이너와 같이 애플리케이션 컴포넌트의 생성과 관계설정, 사용, 생명주기 관리 등을 관장하는 존재가 필요하다.*
>
> *- 토비의 스프링, 1장 오브젝트와 의존관계, 1.4 제어의 역전(IoC)*

### 프레임워크 vs 라이브러리

- 프레임워크가 내가 작성한 코드를 제어하고, 대신 실행하면 그것은 프레임워크가 맞다.
- 반면에 내가 작성한 코드가 직접 제어의 흐름을 담당한다면 그것은 프레임워크가 아니라 라이브러리다.

## 의존관계 주입 (Dependency Injection, DI)

의존관계는 정적인 클래스 의존 관계와, 실행 시점에 결정되는 동적인 객체(인스턴스) 의존 관계 둘을 분리해서 생각해야 한다.

- 정적인 클래스 의존 관계: 클래스가 사용하는 import 코드만 보고 의존관계를 쉽게 판단할 수 있다. 정적인 의존관계는 애플리케이션을 실행하지 않아도 분석할 수 있다.


- 동적인 객체 인스턴스 의존 관계: 애플리케이션 실행 시점에 실제 생성된 객체 인스턴스의 참조가 연결된 의존 관계다.

애플리케이션 실행 시점(런타임)에 외부에서 실제 구현 객체를 생성하고 클라이언트에 전달해서 클라이언트와 서버의 실제 의존관계가 연결 되는 것을 의존관계 주입이라 한다.







